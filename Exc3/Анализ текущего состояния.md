# Анализ текущего состояния

Судя по описанию основная проблема в времени выполнения синхронных запросов к сервису ins-product-aggregator.
При этом, уже известно что сервисы core-app и ins-comp-settlement хранят у себя данные сервиса ins-product-aggregator для
ускорения.

Предлагается реорганизовать это взаимодействие следующим образом:
- сервис ins-product-aggregator запускает процессы обновления данных с внешних страховых в фоновом режиме
- при получении новых данных, будет публиковаться сообщение в топик Kafka
- одновременно с этим, будет запускаться процесс аггрегации даынных
- по завершению процесса агрегации, cервис публикует в топик kafka сообщение с полным писком данных
- сервис ins-comp-settlement публикает в топик kafka сообщение кажый раз, когда оформляется новая страховка
- сервис core-app подписан на топик об оформленных страховках, читает и обрабатывает эти данные


